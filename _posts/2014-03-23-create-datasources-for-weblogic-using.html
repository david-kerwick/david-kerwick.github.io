---
layout: post
title: Create datasources for weblogic using WLST
date: '2014-03-23T18:42:00.000Z'
author: David
tags:
- wlst
- weblogic
modified_time: '2014-04-03T22:43:26.505+01:00'
blogger_id: tag:blogger.com,1999:blog-2027514548288128942.post-2361511894501527125
blogger_orig_url: http://davidkerwick.blogspot.com/2014/03/create-datasources-for-weblogic-using.html
---

If you are flattening your dev Weblogic server regularly you might want to have your datasources in a wlst file so you can re run it every time.<br /><br />Here is one you can use as the basis<br /><br /><pre class="brush: python">if __name__ == '__main__':<br />    from wlstModule import *<br /><br />print 'Starting the  create datasource script ....'<br />#connect to the Adminserver<br />connect('weblogic', 'weblogic1', 't3://myhost.mydomain.ie:7001')<br />#switch to the cluster<br />cd("/Clusters/my-cluster")<br />#record the cluster a variable for later use<br />target = cmo<br />#return to the root<br />cd("../..")<br /><br />#method to create a datasource with generic settings<br />def create_datasource(username, password, jndiList):<br />    print 'Creating a data source with name ' + username<br />    #Create a datasource using the username as the name<br />    jdbcSystemResource = create(username, "JDBCSystemResource")<br />    jdbcResource = jdbcSystemResource.getJDBCResource()<br />    jdbcResource.setName(username)<br /><br />    #set the connection properties<br />    connectionPoolParams = jdbcResource.getJDBCConnectionPoolParams()<br />    connectionPoolParams.setConnectionReserveTimeoutSeconds(25)<br />    connectionPoolParams.setInitialCapacity(1)<br />    connectionPoolParams.setMaxCapacity(5)<br />    connectionPoolParams.setTestConnectionsOnReserve(true)<br />    connectionPoolParams.setHighestNumWaiters(20)<br />    connectionPoolParams.setStatementTimeout(30)<br />    connectionPoolParams.setTestTableName("SQL SELECT 1 FROM DUAL")<br /><br />    #add each element in the jndiList array as a jndi name<br />    dsParams = jdbcResource.getJDBCDataSourceParams()<br />    for jndi in jndiList:<br />      print 'Add jndi ' + jndi + ' to datasource ' + username<br />      dsParams.addJndiName(jndi)<br /><br />    #Set the connection to the database<br />    driverParams = jdbcResource.getJDBCDriverParams()<br />    driverParams.setUrl("jdbc:oracle:thin:@your_db_hostname:1521:your_db_server_name")<br />    driverParams.setDriverName("oracle.jdbc.driver.OracleDriver")<br />    driverParams.setPassword(password)<br /><br />    driverProperties = driverParams.getProperties()<br />    proper = driverProperties.createProperty("user")<br />    proper.setValue(username)<br /><br />    #target the new datasource to your cluster<br />    jdbcSystemResource.addTarget(target)<br /><br />edit()<br />startEdit()<br /><br />#create an array for the datasource<br />jndiList='jdbc/whatever','jdbc/whomever','jdbc/etc'<br />create_datasource('who_ds', 'who_ds_pw', jndiList)<br /><br />#create an array for the datasource<br />jndiList=['jdbc/curly','jdbc/larry','jdbc/moo']<br />create_datasource('stooges', 'stooges_pw', jndiList)<br /><br />save()<br />activate(block="true")<br /><br />print 'Finished configuring the data source'<br /><br /></pre><br />