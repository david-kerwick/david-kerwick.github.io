---
layout: post
title: Getting an Oracle Sequence in Spring
date: '2015-01-19T21:38:00.000Z'
author: David
tags: 
modified_time: '2015-01-19T21:38:14.842Z'
blogger_id: tag:blogger.com,1999:blog-2027514548288128942.post-3377114735126612980
blogger_orig_url: http://davidkerwick.blogspot.com/2015/01/getting-oracle-sequence-in-spring.html
---

Ok so this one is a bit of lead in but no harm in it by itself.<br />If you are using Spring and want to get the next value from an Oracle sequence you can do something like this.<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">javax.sql.DataSource</span><span style="color: #333333;">;</span><br /><br /><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">org.slf4j.Logger</span><span style="color: #333333;">;</span><br /><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">org.springframework.beans.factory.annotation.Autowired</span><span style="color: #333333;">;</span><br /><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">org.springframework.jdbc.support.incrementer.OracleSequenceMaxValueIncrementer</span><span style="color: #333333;">;</span><br /><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">org.springframework.stereotype.Repository</span><span style="color: #333333;">;</span><br /><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">org.springframework.transaction.annotation.Transactional</span><span style="color: #333333;">;</span><br /><br /><span style="color: #555555; font-weight: bold;">@Repository</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">MessageIdSeqDaoImpl</span> <span style="color: #008800; font-weight: bold;">implements</span> MessageIdSeqDao <span style="color: #333333;">{</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">static</span> <span style="color: #008800; font-weight: bold;">final</span> Logger  logger          <span style="color: #333333;">=</span> org<span style="color: #333333;">.</span><span style="color: #0000cc;">slf4j</span><span style="color: #333333;">.</span><span style="color: #0000cc;">LoggerFactory</span><span style="color: #333333;">.</span><span style="color: #0000cc;">getLogger</span><span style="color: #333333;">(</span>MessageIdSeqDaoImpl<span style="color: #333333;">.</span><span style="color: #0000cc;">class</span><span style="color: #333333;">);</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">static</span> <span style="color: #008800; font-weight: bold;">final</span> String  MESSAGE_ID <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"message_id"</span><span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">transient</span> DataSource dataSource<span style="color: #333333;">;</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Autowired</span><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">setDataSource</span><span style="color: #333333;">(</span>DataSource dataSource<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">this</span><span style="color: #333333;">.</span><span style="color: #0000cc;">dataSource</span> <span style="color: #333333;">=</span> dataSource<span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Transactional</span><span style="color: #333333;">(</span>readOnly <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">true</span><span style="color: #333333;">)</span><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #333399; font-weight: bold;">int</span> <span style="color: #0066bb; font-weight: bold;">getNext</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        OracleSequenceMaxValueIncrementer incr <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> OracleSequenceMaxValueIncrementer<span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">this</span><span style="color: #333333;">.</span><span style="color: #0000cc;">dataSource</span><span style="color: #333333;">,</span> MESSAGE_ID<span style="color: #333333;">);</span><br />        <span style="color: #333399; font-weight: bold;">int</span> messageId <span style="color: #333333;">=</span> incr<span style="color: #333333;">.</span><span style="color: #0000cc;">nextIntValue</span><span style="color: #333333;">();</span><br />        logger<span style="color: #333333;">.</span><span style="color: #0000cc;">debug</span><span style="color: #333333;">(</span><span style="background-color: #fff0f0;">"Sequence nextval = '{}'"</span><span style="color: #333333;">,</span> messageId<span style="color: #333333;">);</span><br />        <span style="color: #008800; font-weight: bold;">return</span> messageId<span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></td></tr></tbody></table></div><br />This is a basic wrapper that uses the Spring class&nbsp;<span style="line-height: 16.25px;">OracleSequenceMaxValueIncrementer to get the sequence, as you can see you pass in the datasource and the name of the sequence.</span><br /><span style="line-height: 16.25px;">In this case the sequence is an int hence the&nbsp;</span><span style="color: #0000cc; line-height: 16.25px;">nextIntValue</span><span style="line-height: 16.25px;">&nbsp;method there's also one for long and String.</span><br /><span style="line-height: 16.25px;"><br /></span><span style="line-height: 16.25px;">Short and sweet now if you wanted to get them in bulk...</span>