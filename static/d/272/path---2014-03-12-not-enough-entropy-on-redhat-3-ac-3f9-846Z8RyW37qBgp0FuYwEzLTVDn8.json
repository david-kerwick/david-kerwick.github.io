{"data":{"site":{"siteMetadata":{"title":"Random Stuff About Stuff","author":"David Kerwick"}},"markdownRemark":{"id":"95fff3b9-9149-58ba-8f38-d8f182ee6e8a","excerpt":"Chaos is good… I found the wlst and the weblogic adminserver kept ‘hanging’ on me.  When doing a domain creation sometimes the script would just stall, when I…","html":"<h3>Chaos is good…</h3>\n<p>I found the wlst and the weblogic adminserver kept ‘hanging’ on me.  When doing a domain creation sometimes the script would just stall, when I logged in to check the box things would be ok.  Strange says I.</p>\n<p>Turns out to be kind of a common problem, I set the box up as a virtual machine and since I was only ssh’d into the box I wasn’t creating enough entropy for the random pool on redhat.  Weblogic does a good bit of ssl and encryption and can use up the pool very quickly, especially a headless dev box as there’s next to nothing happening on the box.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">watch</span> <span class=\"token function\">cat</span> /proc/sys/kernel/random/entropy_avail  \nEvery 2.0s: <span class=\"token function\">cat</span> /proc/sys/kernel/random/entropy_avail  Wed Mar 12 18:50:13 2014  \n170  </code></pre></div>\n<p>Not alot available</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rngd -r /dev/urandom -o /dev/random</code></pre></div>\n<p>Much better</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Every 2.0s: <span class=\"token function\">cat</span> /proc/sys/kernel/random/entropy_avail  Wed Mar 12 19:11:17 2014  \n3200  </code></pre></div>\n<p>Of course you’ll need a better long term solution</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rngd -r /dev/urandom -o /dev/random -b -W 4096 -t 30  </code></pre></div>\n<p>-r take random bits from /dev/urandom<br>\n-o output them to /dev/random<br>\n-b become a background daemon<br>\n-W fill up to 4096 bits (the max I think)<br>\n-t refresh every 30 seconds  </p>\n<p>To have that run on startup</p>\n<p>edit</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> /etc/sysconfig/rngd  </code></pre></div>\n<p>Replace the EXTRAOPTIONS with  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">EXTRAOPTIONS<span class=\"token operator\">=</span><span class=\"token string\">\"-r /dev/urandom -o /dev/random -b -W 4096 -t 30\"</span>  </code></pre></div>\n<p>Make sure rngd starts on each boot  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chkconfig</span> rngd on</code></pre></div>\n<p>You should have no more delays now, adjust the refresh internal if there’s problems.</p>\n<h3>Note</h3>\n<p>/dev/urandom isn’t fully random (what is), when it runs out it just reuses what it has, /dev/random blocks when it runs out, hence the ‘hanging’.  But it solved my problem the sysadmin’s can sort a proper solution for production.</p>\n<p>More on /dev/random <a href=\"http://en.wikipedia.org/wiki//dev/random\">here</a></p>","frontmatter":{"title":"Not enough entropy on RedHat","date":"March 12, 2014"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2014-03-12-not-enough-entropy-on-redhat/","previous":{"fields":{"slug":"/2014-03-11-syntax-highlighter-remove-lime-green/"},"frontmatter":{"title":"Syntax Highlighter - Remove the lime green help box on blogger"}},"next":{"fields":{"slug":"/2014-03-12-really-slow-wlst-and-adminserver-start/"},"frontmatter":{"title":"Really slow wlst and adminserver start on weblogic"}}}}