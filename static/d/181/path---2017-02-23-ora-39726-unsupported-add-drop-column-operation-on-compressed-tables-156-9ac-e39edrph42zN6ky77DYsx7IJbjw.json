{"data":{"site":{"siteMetadata":{"title":"Random Stuff About Stuff","author":"David Kerwick"}},"markdownRemark":{"id":"8828f7a5-35e3-5b5a-9848-dbdc7244d9d7","excerpt":"Working on an old table I needed to add a primary key.  Attempting the below code Gave the error I think the problem is with the default value rather than…","html":"<p>Working on an old table I needed to add a primary key.  Attempting the below code</p>\n<p><code class=\"language-text\">alter table old_table add (new_id varchar2(40 char) default sys_guid() not null);</code></p>\n<p>Gave the error</p>\n<p><code class=\"language-text\">ORA-39726: unsupported add/drop column operation on compressed tables</code></p>\n<p>I think the problem is with the default value rather than adding the new column. So in order to add the key you will need to decompress the table then I guess compress it again so it’s back to how it was.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">alter table old_table move nocompress;\nalter table old_table add (new_id varchar2(40 char) default sys_guid() not null);\nalter table old_table add constraint pk_old_table primary key (new_id);\nalter table old_table move compress;</code></pre></div>\n<p>DBA might have words about such an approach but it works.</p>","frontmatter":{"title":"ORA-39726: unsupported add/drop column operation on compressed tables","date":"February 23, 2017"}}},"pageContext":{"slug":"/2017-02-23-ora-39726-unsupported-add-drop-column-operation-on-compressed-tables/","previous":{"fields":{"slug":"/2017-02-23-setting-up-h2-with-spring-boot/"},"frontmatter":{"title":"Setting up H2 with Spring Boot"}},"next":{"fields":{"slug":"/2017-08-08-using-liquibase-to-get-your-existing-struture-into-h2-database/"},"frontmatter":{"title":"Using liquibase to get your existing structure into H2 database"}}}}