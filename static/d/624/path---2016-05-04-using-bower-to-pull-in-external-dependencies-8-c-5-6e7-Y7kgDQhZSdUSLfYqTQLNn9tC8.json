{"data":{"site":{"siteMetadata":{"title":"Random Stuff About Stuff","author":"David Kerwick"}},"markdownRemark":{"id":"c352ac0e-7f22-58f2-8ccb-2583068dad3e","excerpt":"Following on from using composer to reduce the amount of external code checked into GIT on a legacy project the next step was to look at the internal javascript…","html":"<p>Following on from using composer to reduce the amount of external code checked into GIT on a legacy project the next step was to look at the internal javascript/css etc… and see about reducing that.</p>\n<p>That folder is reasonably large on the legacy project I’m looking at, a multiple of the actual application source.</p>\n<p>So the solution is pretty similar, use a package manager for the front end dependencies.  Now the choices don’t seem as straight forward here but I’m going to go with <a href=\"http://bower.io/\">Bower</a> there seems to be alot of talk of using NPM directly for this but I think a bridge to far for this project.  Maybe once it’s moved over to Bower we can look at what would be involved in making the switch to NPM.  For now I think it’s easier to find everything the legacy project uses with Bower (perhaps I’ll end up in a dependency hell and will be screaming for NPM shortly)</p>\n<h1>Install Bower</h1>\n<p>So in order to get Bower you first need node.js so homebrew to the rescue again</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> node</code></pre></div>\n<p>Then install bower</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g bower</code></pre></div>\n<h1>Basic setup</h1>\n<p>Once installed head to your project directory.</p>\n<p>Much like <code class=\"language-text\">composer.json</code> we need a <code class=\"language-text\">bower.json</code> file to mange what dependencies to pull in and what version.\nYou can create a base one by calling</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bower init</code></pre></div>\n<p>And it will ask some questions and create one for you, I think you can pretty much leave most questions blank.</p>\n<p>The bare minimum I think is just the name but adding private seems to make sense</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-project\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">private</code> means it will never publish the project to the bower registry.</p>\n<h1>Add dependencies</h1>\n<p>You can then start adding dependencies, for example the below will add jquery</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bower <span class=\"token function\">install</span> --save jquery</code></pre></div>\n<p><code class=\"language-text\">--save</code> adds this dependency to the bower.json file.</p>\n<p>So it will now look something like this</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-project\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"jquery\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.3\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>Finding the correct dependency and version</h1>\n<p>So the chances are the legacy project wouldn’t be happy using the latest version of jquery or whatever packages it was using.  Therefore you have to try and find and install the correct version. You can find the packages using <a href=\"http://bower.io/search/\">Bower Search</a> (not the greatest search in the world). Searching for jquery doesn’t seem to actually return the jquery project… but it’s your first port of call.</p>\n<p>So for the project I’m looking at there was just a <code class=\"language-text\">jquery.js</code> which turned out to the minified version. Had to open it and look around for something looked like the version number found <code class=\"language-text\">1.10.2</code> so a few years old. Updated the <code class=\"language-text\">bower.json</code> file to that exact version</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-project\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"jquery\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.10.2\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And then ran</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bower update</code></pre></div>\n<p>Which replaced the previous version with the one we now need.</p>\n<p>Now it’s a matter of going through all the included files, finding and adding them to bower.\nThat seems like it’s going to be a bit of a pain but oh well.</p>\n<h1>Next steps</h1>\n<p>So need to bosh on at finding and installing all the dependencies.  This will put everything in the <code class=\"language-text\">bower_components</code> directory.  So I can change the links for the likes of jquery to look in that folder but it actually installs more than needed for example jquery.js, jquery.min.js, jquery-migrate.js, jquery-migrate.min.js, etc… That I think will require a build step to move only what’s needed for ‘production’ but not something for now.  Another post perhaps, use a PHP build tool? grunt? gulp? Hmmm I just don’t know.</p>","frontmatter":{"title":"Using Bower to pull in external dependencies","date":"May 04, 2016"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016-05-04-using-bower-to-pull-in-external-dependencies/","previous":{"fields":{"slug":"/2016-04-11-getting-php-composer-working-for-a-legacy-project/"},"frontmatter":{"title":"Getting PHP Composer working for a legacy project"}},"next":{"fields":{"slug":"/2016-05-04-using-gulp-to-create-a-deployment-directory-for-a-php-project/"},"frontmatter":{"title":"Using Gulp to create a 'deployment' directory for a php project"}}}}