{"data":{"site":{"siteMetadata":{"title":"Random Stuff About Stuff","author":"David Kerwick"}},"markdownRemark":{"id":"98976564-81ee-5d18-a2c7-59d439592790","excerpt":"So I use a MacBook on a windows network, most things are fine but recently my tests started failing and it turned out to be a time sync problem. The Mac sync’s…","html":"<p>So I use a MacBook on a windows network, most things are fine but recently my tests started failing and it turned out to be a time sync problem.</p>\n<p>The Mac sync’s it’s time over the network but to the apple servers and our windows domain whatever they are using drifts dramaticly away from the actual time.  So the solution is to get the Mac to use the windows domain time.</p>\n<h1>Find the domain time server</h1>\n<p>I believe this is generally the Primary Domain Controller (PDC) but to be sure you can run the below in a command prompt with administrator access on a windows machine </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">w32tm /query /source</code></pre></div>\n<p>And it will show you the time server being used, I believe the below will show you the same thing and not need admin privileges </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">w32tm /query /status</code></pre></div>\n<p>One wonders why the /source command needs admin is all the info is available in /status</p>\n<h1>Set the Mac to use the window NTP server</h1>\n<p>Once you have the server name from above</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\t<span class=\"token function\">sudo</span> systemsetup -setnetworktimeserver <span class=\"token operator\">&lt;</span>your server<span class=\"token operator\">></span></code></pre></div>\n<p>You can check this worked by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\t<span class=\"token function\">sudo</span> systemsetup -getnetworktimeserver</code></pre></div>\n<p>Now just have to wait and see does it stick… Apple have a way of ignoring your settings if they think they know better</p>","frontmatter":{"title":"Getting OSX to use the windows domain ntp server","date":"September 06, 2015"}}},"pageContext":{"slug":"/2015-09-06-getting-osx-to-use-the-windows-domain-ntp-server/","previous":{"fields":{"slug":"/2015-09-06-bulk-adding-users-in-linux/"},"frontmatter":{"title":"Bulk adding users in linux"}},"next":{"fields":{"slug":"/2015-09-06-trying-out-the-zsh-shell/"},"frontmatter":{"title":"Trying out the zsh shell"}}}}