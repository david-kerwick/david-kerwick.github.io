{"data":{"site":{"siteMetadata":{"title":"Random Stuff About Stuff","author":"David Kerwick"}},"markdownRemark":{"id":"fc4462f3-8dee-52df-8828-7ef452c3ba20","excerpt":"So I had to update a table on Oracle and set one of the values to a random value, but that value had to be from a set of fixed values.   I was looking at doing…","html":"<p>So I had to update a table on Oracle and set one of the values to a random value, but that value had to be from a set of fixed values.  </p>\n<p>I was looking at doing something based on the row number, perhaps all the rows starting with 1 get value X, etc…  </p>\n<p>But that wasn’t very random but would distribute pretty well, in blocks anyway.  </p>\n<p>So I think combining DECODE and DBMS_RANDOM is the best solution.  </p>\n<p>Random can give us a random number within a range, say 1-6  </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> dbms_random<span class=\"token punctuation\">.</span><span class=\"token keyword\">value</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> rand_num <span class=\"token keyword\">from</span> dual<span class=\"token punctuation\">;</span>  \n\nrand_num  \n<span class=\"token number\">5.77115198323733</span></code></pre></div>\n<p>We will need a whole number though  </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> trunc<span class=\"token punctuation\">(</span>dbms_random<span class=\"token punctuation\">.</span><span class=\"token keyword\">value</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> rand_num <span class=\"token keyword\">from</span> dual<span class=\"token punctuation\">;</span>  \n\nrand_num  \n<span class=\"token number\">4</span></code></pre></div>\n<p>round might seem tempting but won’t distribute evenly  </p>\n<p>Next we can use the decode statement which acts like an if-else block  </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> decode<span class=\"token punctuation\">(</span> trunc<span class=\"token punctuation\">(</span>dbms_random<span class=\"token punctuation\">.</span><span class=\"token keyword\">value</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 1'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 2'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 3'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 4'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 5'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token string\">'Default value'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> dual<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Not the greatest set of values but shows what happens.<br>\nThe random statement picks a value between 1 and 6.<br>\nThe decode statement then picks the string associated with this number, ‘6’ is not defined but the default value picks that up.  </p>\n<p>So in the end the update statement would look something like this  </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">update</span> some_table <span class=\"token keyword\">set</span> some_value <span class=\"token operator\">=</span> decode<span class=\"token punctuation\">(</span> trunc<span class=\"token punctuation\">(</span>dbms_random<span class=\"token punctuation\">.</span><span class=\"token keyword\">value</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 1'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 2'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 3'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 4'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Some value 5'</span><span class=\"token punctuation\">,</span>  \n<span class=\"token string\">'Default value'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </code></pre></div>","frontmatter":{"title":"Oracle Update Rows With Random Values From A Set","date":"January 06, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2015-01-06-oracle-update-rows-with-random-values/","previous":{"fields":{"slug":"/2015-01-05-the-highlighter-fight-continues/"},"frontmatter":{"title":"The Highlighter Fight Continues"}},"next":{"fields":{"slug":"/2015-01-19-null-argument-starting-tomcat-in-eclipse/"},"frontmatter":{"title":"Null Argument Starting Tomcat in Eclipse"}}}}