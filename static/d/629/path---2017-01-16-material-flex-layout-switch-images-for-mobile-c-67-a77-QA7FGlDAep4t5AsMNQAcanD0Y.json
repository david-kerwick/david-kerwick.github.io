{"data":{"site":{"siteMetadata":{"title":"Random Stuff About Stuff","author":"David Kerwick"}},"markdownRemark":{"id":"8fd7b516-f0f3-5567-8b81-5d38aed48828","excerpt":"Having got the basic structure for a material layout based on flex-layout I moved onto doing the header in more detail. It will be the classic toolbar with an…","html":"<p>Having got the basic structure for a material layout based on flex-layout I moved onto doing the header in more detail. It will be the classic toolbar with an image on the right and then some title etc…</p>\n<p>But what I wanted was a different image for mobile and desktop. Or to be more precise I already have a different image for both it’s just a matter of displaying them at the correct time.</p>\n<p>Mainly because I just started looking at Flex Layout for Material 2 I’ll use that to achieve this.</p>\n<p>Lets set out the header and toolbar I’m using first.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;header&gt;\n  &lt;md-toolbar color=&quot;primary&quot;&gt;\n    &lt;img class=&quot;logo-lg&quot; src=&quot;assets/logo-lg.png&quot; alt=&quot;My Logo&quot;&gt;\n    &lt;span&gt;Header Title&lt;/span&gt;\n  &lt;/md-toolbar&gt;\n&lt;/header&gt;</code></pre></div>\n<p>Display the toolbar using <code class=\"language-text\">md-toolbar</code> and in that I have an image and a title.  I’ve added a class to the image so i can set padding etc…</p>\n<p>First off I used the Flex directives to show/hide depending on the breakpoints.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;header&gt;\n  &lt;md-toolbar color=&quot;primary&quot; fxLayout=&quot;row&quot;&gt;\n    &lt;img fxFlex fxShow=&quot;false&quot; fxShow.gt-sm class=&quot;logo-lg&quot; src=&quot;assets/logo-lg.png&quot; alt=&quot;My Logo&quot;&gt;\n    &lt;img fxFlex fxHide=&quot;false&quot; fxHide.gt-sm class=&quot;logo-sm&quot; src=&quot;assets/logo-sm.png&quot; alt=&quot;My Logo&quot;&gt;\n    &lt;span&gt;Header Title&lt;/span&gt;\n  &lt;/md-toolbar&gt;\n&lt;/header&gt;</code></pre></div>\n<p>First add <code class=\"language-text\">fxLayout=&quot;row&quot;</code> to the container so flex in ‘turned on’ for that container, in this case <code class=\"language-text\">md-toolbar</code></p>\n<p>Then for the large image, don’t show it <code class=\"language-text\">fxShow=&quot;false&quot;</code> unless the breakpoint is greater than small <code class=\"language-text\">fxShow.gt-sm</code></p>\n<p>For the small image, don’t hide it <code class=\"language-text\">fxHide=&quot;false&quot;</code> unless the breakpoint is greater than small <code class=\"language-text\">fxHide.gt-sm</code></p>\n<p>This works, you can shrink and expand your screen once you have it deployed to marvel at it.</p>\n<p>But both images are loaded when in most cases only one is needed, and loading the large image on mobile is quite the waste. So another attempt needed.</p>\n<p>Flex-layout has a set of observables etc… you can use to query the breakpoints that are active etc… Now be aware as of beta.1 here be dragons, it is beta software after all. So I moved to working directly off master i.e.</p>\n<p><code class=\"language-text\">npm install https://github.com/angular/flex-layout-builds.git -save</code></p>\n<p><strong>UPDATE 2017-02-02</strong>\nSo the fun of running of a beta, this has changed now, <code class=\"language-text\">MatchMediaObservable</code> is no more so you will get not found errors.  It’s now <code class=\"language-text\">ObservableMediaService</code> so that needs to be changed. But using the latest Angular CLI you’ll get the error</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Module build failed: TypeError: Cannot read property &#39;kind&#39; of undefined\n    at /Users/David/Dropbox/work/HSE/Documents/workspace-sts-3.7.0.RELEASE/test-cli/node_modules/@ngtools/webpack/src/loader.js:93:31\n    at Array.map (native)\n    at _addCtorParameters (/Users/David/Dropbox/work/HSE/Documents/workspace-sts-3.7.0.RELEASE/test-cli/node_modules/@ngtools/webpack/src/loader.js:92:46)\n    at /Users/David/Dropbox/work/HSE/Documents/workspace-sts-3.7.0.RELEASE/test-cli/node_modules/@ngtools/webpack/src/loader.js:114:17\n    at Array.forEach (native)\n    at _removeDecorators (/Users/David/Dropbox/work/HSE/Documents/workspace-sts-3.7.0.RELEASE/test-cli/node_modules/@ngtools/webpack/src/loader.js:109:10)\n    at /Users/David/Dropbox/work/HSE/Documents/workspace-sts-3.7.0.RELEASE/test-cli/node_modules/@ngtools/webpack/src/loader.js:280:48\n    at process._tickCallback (internal/process/next_tick.js:103:7)\n @ ./src/$$_gendir/app/app.component.ngfactory.ts 12:0-51\n @ ./src/$$_gendir/app/app.module.ngfactory.ts\n @ ./src/main.ts\n @ multi ./src/main.ts</code></pre></div>\n<p>The injected constructor argument needs a type to keep things happy.\nSo new code follows\n<strong>End update</strong></p>\n<p>You then need to inject the <code class=\"language-text\">ObservableMediaService</code> to get access to it in your template. I did that by adding a constructor to <code class=\"language-text\">app.component.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">constructor(@Inject(ObservableMediaService) private _media: OpaqueToken) {}</code></pre></div>\n<p>Then in the template I removed the flex directives and used ngIf to conditionally display the image for the small and greater than small breakpoints</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;header&gt;\n    &lt;md-toolbar color=&quot;primary&quot;&gt;\n      &lt;img *ngIf=&quot;_media.isActive(&#39;gt-sm&#39;)&quot; class=&quot;logo-lg&quot; src=&quot;assets/logo-lg.png&quot; alt=&quot;My Logo&quot;&gt;\n      &lt;img *ngIf=&quot;!_media.isActive(&#39;gt-sm&#39;)&quot; class=&quot;logo-sm&quot; src=&quot;assets/logo-sm.png&quot; alt=&quot;My Logo&quot;&gt;\n      &lt;span&gt;Header Title&lt;/span&gt;\n    &lt;/md-toolbar&gt;\n  &lt;/header&gt;</code></pre></div>\n<p>As you can see the large logo is displayed if the breakpoint is greater than small <code class=\"language-text\">*ngIf=&quot;_media.isActive(&#39;gt-sm&#39;)&quot;</code> and small one is displayed if it’s not <code class=\"language-text\">*ngIf=&quot;!_media.isActive(&#39;gt-sm&#39;)&quot;</code></p>\n<p>Now only one image is downloaded for mobile, on desktop they might load both if they wiggle the browser window size about but that’s OK.</p>","frontmatter":{"title":"Material Flex Layout - switch images for mobile","date":"January 16, 2017"}}},"pageContext":{"slug":"/2017-01-16-material-flex-layout-switch-images-for-mobile/","previous":{"fields":{"slug":"/2017-01-14-atom-autosave/"},"frontmatter":{"title":"Atom autosave"}},"next":{"fields":{"slug":"/2017-01-16-material-2-using-primary-accent-and-warn-colours-in-your-components/"},"frontmatter":{"title":"Material 2 - Using primary, accent and warn colours in your components"}}}}